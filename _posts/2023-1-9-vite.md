---
layout:     post
title:      Vite
subtitle:   下一代的前端工具链
date:       2022-12-14
author:     page
header-img: img/vite+vue.png
catalog: true
tags:
    - vue
---

# Vite

### base

资源存放路径，支持绝对/相对路径

### build

- outDir：资源打包输出目录

- commonjsOptions
  
  值设为 `{ transformMixedEsModules: true }` 用于转换 `require` 导出/引入；
  
  部分库使用commonJS规范，需声明此选项转换，否则生产环境报错；

- rollupOptions：打包配置
  
  资源分类独立存放
  
  ```js
  rollupOptions: {
    output: {
      assetFileNames: (assetInfo) => {
        let info = assetInfo.name.split(".");
        let extType = info[info.length - 1];
        if (/\.(png|jpe?g|gif|svg)(\?.*)?$/.test(assetInfo.name)) {
          extType = "img";
        } else if (/\.(woff2?|eot|ttf|otf)(\?.*)?$/i.test(assetInfo.name)) {
          extType = "fonts";
        }
        return `${extType}/[name]-[hash][extname]`;
      },
      chunkFileNames: "js/[name]-[hash].js",
      entryFileNames: "js/[name]-[hash].js"
    }
  }
  ```

vite 打包正式环境 require is not defined
